import{b as g}from"./browser-e933942f.js";import{f as v,u as f,B as h,s as y,C as w,E as b,o as _,a as x,b as s,t as r,e as p,I,G as S,w as B,i as k,S as q,U as C,W}from"./vendor-bc3e0ca2.js";import{g as D}from"./order-cc374703.js";import{_ as P}from"./index-5072b23b.js";const R=o=>(C("data-v-86ccda0b"),o=o(),W(),o),T={class:"pay-qrcode"},N={class:"wrapper"},Q={class:"site"},U=R(()=>s("div",{class:"red-text"},"！!"+r("请尽快支付，支付完成后，请返回并刷新")+"！！",-1)),j={class:"qr-code-container"},E={class:"qr-code"},M=["src"],V={__name:"PayQr",setup(o){const i=v(),n=f(),c=h("");let d=0;y(()=>{const{img:t,orderId:e}=i.query;console.log(t,e),u(t),l(e)});function u(t){const e=decodeURIComponent(t);console.log("img",e),e.endsWith("jpg")||e.endsWith("png")||e.endsWith("jpeg")||e.endsWith("webp")||e.includes("data:image")?(console.log("远程二维码"),c.value=e):(console.log("图片地址"),g.toDataURL(e).then(a=>{c.value=a}))}function l(t){d=setTimeout(()=>{t&&D(t).then(e=>{Number(e.data)===3?(clearTimeout(d),w.success("购买成功"),n.replace("/profile?refresh=1")):l(t)})},3e3)}return(t,e)=>{const a=q,m=b("wave");return _(),x("div",T,[s("div",N,[s("div",Q,r("订单编号")+"："+r(p(i).query.orderId),1),U,s("div",j,[s("div",E,[s("img",{src:c.value},null,8,M)])]),I((_(),S(a,{type:"primary",size:"large",style:{width:"140px",margin:"20px auto"},onClick:e[0]||(e[0]=z=>p(n).replace("/profile"))},{default:B(()=>[k("返回")]),_:1})),[[m]])])])}}},A=P(V,[["__scopeId","data-v-86ccda0b"]]);export{A as default};
