import{c as b,o as d,a as m,b as c,n as E,d as G,u as q,e as v,t as N,f as K,r as k,g as _,F as T,h as U,w as h,i as V,_ as J,M as Q,D as Y,l as S,j as X,N as Z,k as x,m as ee,p as te,q as oe,s as ne,v as se,x as re,y as ae,V as ie,z as ce}from"./vendor-bc3e0ca2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const _e="modulepreload",le=function(e,t){return new URL(e,t).href},D={},p=function(t,s,a){if(!s||s.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=le(o,a),o in D)return;D[o]=!0;const r=o.endsWith(".css"),f=r?'[rel="stylesheet"]':"";if(!!a)for(let g=n.length-1;g>=0;g--){const w=n[g];if(w.href===o&&(!r||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${f}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":_e,r||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),r)return new Promise((g,w)=>{u.addEventListener("load",g),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};const L=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},ue={__name:"index",props:{name:{type:String,required:!0},weight:{type:String,required:!1,default:"regular"},disabled:{type:Boolean,default:!1},size:{type:String,default:""}},emits:["click"],setup(e,{emit:t}){const s=e,a=b(()=>"ph-"+s.name),n=b(()=>s.weight==="regular"?"ph":"ph-"+s.weight);function o(r){t("click",r)}return(r,f)=>(d(),m("span",{class:E(["ph-icon",{disabled:e.disabled}]),style:G({fontSize:s.size}),onClick:o},[c("i",{class:E([a.value,n.value])},null,2)],6))}},j=L(ue,[["__scopeId","data-v-d40ec202"]]),pe=""+new URL("logo-a1789f21.png",import.meta.url).href,i=window.EnvConfig,C=i.serverUrl||window.location.origin,z=i.appName,$=i.appLogo,Fe="/static",Ge=i.iosUrl,Ke=i.iosVersion,Je=i.iosName,Qe=i.iosHtmlTitle,Ye=i.iosHtmlContent,Xe=i.androidUrl,Ze=i.androidVersion;i.androidName;const et=i.macosUrl,tt=i.macosVersion;i.macosName;const ot=i.windowsUrl,nt=i.windowsVersion;i.windowsName;const de=["src"],me={key:1,src:pe,class:"in-logo"},fe={class:"in-text uppercase"},ge={__name:"index",props:{label:{type:String,default:z},route:{type:String,default:"/"},align:{type:String,default:"left"}},setup(e){const t=e,s=q();function a(){t.route&&s.push(t.route)}return(n,o)=>(d(),m("div",{class:E(["logo-container",[e.align]]),onClick:a},[v($)?(d(),m("img",{key:0,src:v($),class:"in-logo"},null,8,de)):(d(),m("img",me)),c("span",fe,N(t.label),1)],2))}},M=L(ge,[["__scopeId","data-v-183b77e6"]]);const he={class:"layout-container"},ve={class:"layout-navbar"},ye={class:"layout-wrapper"},we={class:"links"},Ee={class:"layout-main"},Le={class:"layout-wrapper"},Oe={class:"layout-menu"},Ie={__name:"Layout",setup(e){const t=K(),s=q(),a=[{name:"下载",path:"/download"},{name:"充值",path:"/plan"},{name:"我的账号",path:"/profile"}],n=b(()=>t.meta.name);return(o,r)=>{const f=k("router-link"),A=k("router-view"),u=j,g=J,w=Q,F=Y;return d(),m("div",he,[c("div",ve,[c("div",ye,[_(v(M),{class:"logo"}),c("div",we,[(d(),m(T,null,U(a,l=>_(f,{key:l.name,to:l.path,class:E({"is-active":v(t).fullPath.includes(l.path)})},{default:h(()=>[V(N(l.name),1)]),_:2},1032,["to","class"])),64))])])]),c("div",Ee,[c("div",Le,[_(A)])]),c("div",Oe,[c("div",{class:"mb-left",onClick:r[0]||(r[0]=l=>v(s).back())}),_(v(M),{class:"mb-logo",label:n.value},null,8,["label"]),_(F,{class:"mb-right",trigger:["click"]},{overlay:h(()=>[_(w,null,{default:h(()=>[(d(),m(T,null,U(a,l=>_(g,{key:l.name},{default:h(()=>[_(f,{to:l.path,class:E({"is-active":v(t).fullPath.includes(l.path)})},{default:h(()=>[V(N(l.name),1)]),_:2},1032,["to","class"])]),_:2},1024)),64))]),_:1})]),default:h(()=>[_(u,{name:"list"})]),_:1})])])}}},Re=L(Ie,[["__scopeId","data-v-80660483"]]),Se=[{path:"/",name:"Layout",component:Re,redirect:"/download",children:[{path:"/plan",name:"Plan",component:()=>p(()=>import("./Plan-2e4c1135.js"),["./Plan-2e4c1135.js","./index-2cfd342e.js","./vendor-bc3e0ca2.js","./order-cc374703.js","./Plan-0de61673.css"],import.meta.url),meta:{name:"充值"}},{path:"/profile",name:"Profile",component:()=>p(()=>import("./Profile-3370b21b.js"),["./Profile-3370b21b.js","./vendor-bc3e0ca2.js","./subscribe-979913a8.js","./index-2cfd342e.js","./Profile-7fae4927.css"],import.meta.url),meta:{name:"我的账号"}},{path:"/download",name:"Download",component:()=>p(()=>import("./Download-acc63c0d.js"),["./Download-acc63c0d.js","./vendor-bc3e0ca2.js","./Download-48d03ae1.css"],import.meta.url),meta:{name:"下载"}},{path:"/ios",name:"Testflight",component:()=>p(()=>import("./Testflight-5913f36a.js"),["./Testflight-5913f36a.js","./subscribe-979913a8.js","./vendor-bc3e0ca2.js","./index-2cfd342e.js","./browser-e933942f.js","./Testflight-626d0fcf.css"],import.meta.url),meta:{name:"Shadowrocket"}},{path:"/login",name:"Login",component:()=>p(()=>import("./Login-f0fd2aff.js"),["./Login-f0fd2aff.js","./vendor-bc3e0ca2.js","./auth-ff21b30d.js","./auth-d44c845e.css"],import.meta.url),meta:{name:"登录"}},{path:"/register",name:"Register",component:()=>p(()=>import("./Register-7ea509da.js"),["./Register-7ea509da.js","./vendor-bc3e0ca2.js","./auth-ff21b30d.js","./auth-d44c845e.css","./Register-609822bf.css"],import.meta.url),meta:{name:"注册"}},{path:"/reset-password",name:"ResetPassword",component:()=>p(()=>import("./ResetPassword-99afffd1.js"),["./ResetPassword-99afffd1.js","./vendor-bc3e0ca2.js","./auth-ff21b30d.js","./auth-d44c845e.css"],import.meta.url),meta:{name:"重置密码"}}]},{path:"/payqr",name:"PayQr",component:()=>p(()=>import("./PayQr-36ed16d5.js"),["./PayQr-36ed16d5.js","./browser-e933942f.js","./vendor-bc3e0ca2.js","./order-cc374703.js","./PayQr-0f98a8ba.css"],import.meta.url),meta:{name:"支付"}},{path:"/error",name:"Error",component:()=>p(()=>import("./Error-90e5be52.js"),["./Error-90e5be52.js","./vendor-bc3e0ca2.js","./Error-8d2a1825.css"],import.meta.url),meta:{name:"错误"}}],Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));S.namespace("__KJYUI__");const I="authorization",st="payment";const O=X.create({baseURL:"",timeout:30*1e3});Z.configure({showSpinner:!1});O.interceptors.request.use(e=>{const t=S.get(I);return t&&(e.headers[I]=t),e},e=>Promise.reject(e));O.interceptors.response.use(e=>e.data,e=>{try{const t=e.response.data;x.error({message:"请求失败",description:t.message}),e.response.status===403&&S.remove(I)}catch{x.error({message:"请求失败",description:"似乎出了点问题"})}return Promise.reject(e)});function be(){return O({url:C+"/api/v1/guest/comm/config",method:"get"})}function Ne(){return O({url:C+"/api/v1/user/comm/config",method:"get"})}function ke(){return O({url:C+"/api/v1/user/info",method:"get"})}const W=ee("user",{state:()=>({globalConfig:{},userConfig:{},userInfo:{}}),actions:{async getGlobalConfig(){const e=await be();this.globalConfig=e.data},async getUserConfig(){const e=await Ne();this.userConfig=e.data},async getUserInfo(){const e=await ke();this.userInfo=e.data}}});var R={"./gate/routes/static.js":Pe};function P(e){return B(e),R[e]}function B(e){if(e in R)return R[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}P.keys=function(){return Object.keys(R)};P.resolve=B;P.id="__require_context_for_vite_function_0";function Ce(){const e=P;return e.keys().reduce((a,n)=>a.concat(e(n).default),[])}const Ae=["/","/download","/ios","/login","/register","/reset-password","/error"],H=te({history:oe(),routes:[...Ce(),{path:"/:pathMatch(.*)*",name:"404",redirect:"/error"}]});H.beforeEach(async(e,t,s)=>{var n;if(document.title=[z,((n=e.meta)==null?void 0:n.name)??""].reverse().join(" - "),e.path==="/error")return s();if(S.get(I))if(e.path==="/login")s({path:"/profile"});else{const o=W(),{userInfo:r}=o;if(r.uuid)s();else try{await o.getUserConfig(),await o.getUserInfo(),s({...e,replace:!0})}catch(f){console.error(f),s("/error")}}else Ae.includes(e.path)?s():s("/login")});const Te={class:"app-container"},Ue={__name:"App",setup(e){const t=W();return ne(async()=>{await t.getGlobalConfig()}),(s,a)=>{const n=k("router-view"),o=se;return d(),m("div",Te,[_(o,{theme:{token:{colorPrimary:"#000"}}},{default:h(()=>[_(n)]),_:1})])}}},Ve=L(Ue,[["__scopeId","data-v-9d089fb3"]]),xe={},De={class:"loading-four"},$e=c("span",null,null,-1),Me=c("span",null,null,-1),qe=c("span",null,null,-1),je=c("span",null,null,-1),ze=[$e,Me,qe,je];function We(e,t){return d(),m("div",De,ze)}const Be=L(xe,[["render",We]]);const y=re(Ve);y.use(ae());y.use(H);y.use(ie);y.use(ce);y.component("PhIcon",j);y.component("Loading",Be);y.mount("#app");export{I as A,Qe as I,M as L,et as M,st as P,C as S,ot as W,L as _,j as a,Be as b,Xe as c,Ze as d,tt as e,nt as f,Ye as g,Je as h,Ke as i,Ge as j,z as k,Fe as l,O as s,W as u};
